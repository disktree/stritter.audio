<!DOCTYPE html>
<html lang="{{$.Site.LanguageCode}}">
    <head>
        {{ $root := .Site.BaseURL }}
        {{ $url := urls.Parse $root }}

        <meta charset="utf-8">
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="viewport" content="width=device-width,minimum-scale=1">
        <meta name="mobile-web-app-capable" content="yes">
        <meta name="title" content="{{ .Site.Title }}">
        <meta name="description" content="{{ with .Params.description }}{{- . -}}{{ else }}{{- .Site.Params.description -}}{{ end }}">
        {{ with .Site.Params.publisher }}<meta name="publisher" content="{{- . -}}">{{ end }}
        {{ with .Site.Params.theme_color }}<meta name="theme-color" content="{{- . -}}">{{ end }}
             
        {{ $keywords := .Site.Params.keywords }}
        {{ with .Params.keywords }}{{ $keywords = union $keywords . }}{{ end }}
        <meta name="keywords" content="{{ delimit $keywords "," }}">

        {{ template "_internal/opengraph.html" . }}
        {{ template "_internal/twitter_cards.html" . }}

        <title>{{block "title" .}}{{.Site.Title}}{{end}}{{with .Page.Title}} | {{.}}{{end}}</title>
        
        <style>
            :root {
                --background: #eeefee;
                --f_high: #222222;
                --f_med: #999999;
                --f_low: #bbbcbb;
                --f_inv: #545454;
                --b_high: #545454;
                --b_med: #ced0ce;
                --b_low: #f5f5f5;
                --b_inv: #ed2c3e;  
            }
        </style>

        <link rel="stylesheet" href="{{ $root }}/style.css">
        <!--<link rel="alternate" href="feed" type="application/atom+xml" title="Stritter Audio"/>-->
        <link rel="manifest" href="{{ $root }}/manifest.json">
        {{ partial "site/favicons" . }}
       
        <script src="{{ (resources.Get "script/app.js").Permalink }}" async></script>
        <script src="{{ (resources.Get "script/theme.js" | resources.Minify).RelPermalink }}" async></script>
        {{ range $val := $.Site.Params.customJS }}
		    {{ if gt (len $val) 0 }}<script src="{{ $root }}{{ $val }}" async></script>{{ end }}
		{{ end }}
        {{ range $val := .Params.customJS }}
		    {{ if gt (len $val) 0 }}<script src="{{ $root }}{{ $val }}" async></script>{{ end }}
        {{ end }}

	</head>
	<body>
        <header>
            {{ block "header" . }}{{- partial "site/header.html" . -}}{{ end }}
            <nav data-id="nav">{{ block "nav" . }}{{- partial "site/nav.html" . -}}{{ end }}</nav>
            <nav data-id="subnav">{{ block "subnav" . }}{{ end }}</nav>
        </header>
        <main>{{ block "main" . }}{{- partial "site/main.html" . -}}{{ end }}</main>
		<footer class="meta">{{ block "footer" . }}{{- partial "site/footer.html" . -}}{{ end }}</footer>
        <div id="background-media">{{ block "background-media" .}}{{ end }}</div>
    </body>
</html>

